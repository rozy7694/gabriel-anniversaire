<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mission Laser Game - Gabriel 8 ans</title>
    <style>
        /* --- STYLE GÃ‰NÃ‰RAL --- */
        body { margin: 0; padding: 0; background-color: #051a05; font-family: 'Courier New', Courier, monospace; color: white; overflow-x: hidden; }
        
        /* LOGIN SCREEN */
        #login-screen { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: #000; display: flex; flex-direction: column; justify-content: center; align-items: center; z-index: 1000; text-align: center; }
        .scanner-line { width: 100%; height: 2px; background: #00ff00; position: absolute; top: 0; animation: scan 3s infinite linear; opacity: 0.5; }
        @keyframes scan { 0% {top: 0%;} 100% {top: 100%;} }
        
        input { padding: 10px; font-size: 20px; text-align: center; background: #111; border: 2px solid #00ff00; color: #00ff00; margin-bottom: 20px; outline: none; border-radius: 5px; width: 220px; text-transform: uppercase; }
        button.access-btn { padding: 10px 30px; font-size: 18px; background: #00ff00; color: #000; border: none; cursor: pointer; font-weight: bold; text-transform: uppercase; border-radius: 5px; }

        /* MAIN CONTENT */
        #main-content { display: none; flex-direction: column; align-items: center; position: relative; padding-bottom: 50px; padding-top: 20px; }
        
        /* BOUTON MUSIQUE */
        #music-control-container { margin-bottom: 15px; z-index: 20; }
        .music-btn { background: #000; border: 2px solid #00ff00; color: #00ff00; font-family: 'Courier New', Courier, monospace; font-weight: bold; padding: 10px 20px; border-radius: 50px; cursor: pointer; text-transform: uppercase; display: flex; align-items: center; gap: 10px; transition: 0.2s; }
        .music-btn:hover { background: #00ff00; color: black; }
        .music-btn.playing { border-color: #ff3333; color: #ff3333; }
        .music-btn.playing:hover { background: #ff3333; color: white; }
        
        /* IMAGE & ZONES */
        .container { position: relative; max-width: 100%; width: 650px; }
        .hero-image { width: 100%; height: auto; display: block; min-height: 400px; background-color: #0a2e0a; }

        .hotspot { position: absolute; cursor: pointer; z-index: 10; background-color: transparent; }
        .btn-infos { top: 1%; right: 26%; width: 13%; height: 8%; }
        .btn-programme { top: 1%; right: 14%; width: 13%; height: 8%; }
        .btn-parents { top: 1%; right: 1%; width: 12%; height: 8%; }
        .btn-adresse-txt { bottom: 3%; left: 3%; width: 40%; height: 12%; }
        .btn-map-direct { bottom: 3%; right: 3%; width: 50%; height: 15%; }

        /* MODALES */
        .modal { display: none; position: fixed; z-index: 2000; left: 0; top: 0; width: 100%; height: 100%; background-color: rgba(0,0,0,0.9); align-items: center; justify-content: center; }
        .modal-content { background-color: #111; border: 2px solid #00ff00; box-shadow: 0 0 20px #00ff00; padding: 20px; width: 85%; max-width: 500px; text-align: left; position: relative; border-radius: 10px; max-height: 80vh; overflow-y: auto; }
        .close { color: #aaa; float: right; font-size: 28px; font-weight: bold; cursor: pointer; }
        h2 { color: #00ff00; border-bottom: 1px solid #00ff00; padding-bottom: 10px; margin-top: 0;}
        p, li { line-height: 1.6; font-size: 16px; margin-bottom: 10px; }
        .whatsapp-btn { display: inline-block; background-color: #25D366; color: white; padding: 10px 15px; text-decoration: none; border-radius: 5px; font-weight: bold; margin-top: 10px; width: 100%; text-align: center; box-sizing: border-box; }
        .phone-link { color: #00ff00; text-decoration: none; font-weight: bold; }
    </style>
</head>
<body>

    <div id="login-screen">
        <form id="login-form" onsubmit="event.preventDefault(); checkCode();">
            <div class="scanner-line"></div>
            <h1 style="color:#00ff00; text-shadow: 0 0 10px #00ff00; font-size: 24px;">ACCÃˆS CLASSÃ‰ SECRET</h1>
            <p>Mot de passe : <strong>   </strong></p>
            <input type="text" id="code-input" placeholder="ENTRER LE CODE" autocomplete="off">
            <button type="submit" class="access-btn">Entrer</button>
            <p id="error-msg" style="color:red; display:none; margin-top:10px; font-weight:bold;">CODE INCORRECT</p>
        </form>
    </div>

    <div id="main-content">
        <div id="music-control-container">
             <button id="music-btn" class="music-btn" onclick="toggleMusic()"><span>ðŸŽµ Son activÃ©</span></button>
        </div>
        <div class="container">
            <img src="gabriel-hero.jpg" alt="Invitation" class="hero-image">
            
            <div class="hotspot btn-infos" onclick="openModal('modal-infos')"></div>
            <div class="hotspot btn-programme" onclick="openModal('modal-programme')"></div>
            <div class="hotspot btn-parents" onclick="openModal('modal-parents')"></div>
            <div class="hotspot btn-adresse-txt" onclick="openModal('modal-adresse')"></div>
            
            <a href="https://www.google.com/maps/dir/?api=1&origin=ArrÃªt+Tram+T2+Jacqueline+Auriol&destination=300+rue+d'Estienne+d'Orves,+Colombes&travelmode=walking" target="_blank" class="hotspot btn-map-direct" title="Voir l'itinÃ©raire"></a>
        </div>
    </div>

    <div id="modal-infos" class="modal"><div class="modal-content"><span class="close" onclick="closeModal('modal-infos')">Ã—</span><h2>INFOS</h2><p><strong>ðŸ“… Date :</strong> Dimanche 11 janvier 2026</p><p><strong>ðŸ•’ 14h00 â€“ 17h30</strong></p></div></div>
    
    <div id="modal-programme" class="modal"><div class="modal-content"><span class="close" onclick="closeModal('modal-programme')">Ã—</span><h2>PROGRAMME</h2><ul><li>14h00 : Accueil</li><li>Laser Game</li><li>GÃ¢teau</li><li>17h30 : Fin</li></ul></div></div>
    
    <div id="modal-parents" class="modal"><div class="modal-content"><span class="close" onclick="closeModal('modal-parents')">Ã—</span><h2>CONTACTS</h2><p>Gengas : <a href="tel:0676142896" class="phone-link">06 76 14 28 96</a><br>David : <a href="tel:0673199720" class="phone-link">06 73 19 97 20</a></p><a href="https://wa.me/33673199720" target="_blank" class="whatsapp-btn">WHATSAPP</a></div></div>
    
    <div id="modal-adresse" class="modal"><div class="modal-content"><span class="close" onclick="closeModal('modal-adresse')">Ã—</span><h2>LIEU</h2><p>Chez Gabriel<br>300 rue d'Estienne d'Orves</p><iframe width="100%" height="250" style="border:0;" src="https://maps.google.com/maps?q=300+Rue+d'Estienne+d'Orves,+92700+Colombes&t=&z=15&ie=UTF8&iwloc=&output=embed"></iframe></div></div>

    <script>
        // --- CHARGEMENT DES 3 FICHIERS AUDIO ---
        var voice = new Audio('output.mp3'); 
        var breath = new Audio('swvader02.mp3');
        var music = new Audio('musique.mp3');
        
        // Timer pour gÃ©rer le silence de 10s
        var musicTimer;
        
        var isPlaying = false;
        var musicBtn = document.getElementById('music-btn');

        // --- GESTION DE LA RÃ‰PÃ‰TITION ESPACÃ‰E (10s) ---
        music.onended = function() {
            if(isPlaying) {
                // Quand la musique finit, on attend 10 secondes (10000ms)
                musicTimer = setTimeout(function() {
                    if(isPlaying) { // On vÃ©rifie si l'utilisateur n'a pas coupÃ© le son entre temps
                        music.play();
                    }
                }, 10000);
            }
        };

        // --- VALIDATION DU CODE ---
        function checkCode() {
            var val = document.getElementById('code-input').value.trim().toLowerCase();
            if(val === 'gabriel') {
                document.getElementById('login-screen').style.display = 'none';
                document.getElementById('main-content').style.display = 'flex';
                playAudioSequence();
            } else {
                document.getElementById('error-msg').style.display = 'block';
            }
        }

        // --- SÃ‰QUENCE : VOIX -> SOUFFLE -> MUSIQUE ---
        function playAudioSequence() {
            isPlaying = true;
            updateBtnUI();

            // 1. VOIX
            var p1 = voice.play();

            if (p1 !== undefined) {
                p1.then(_ => {
                    voice.onended = function() {
                        // 2. SOUFFLE
                        var p2 = breath.play();
                        if (p2 !== undefined) {
                            p2.then(_ => {
                                breath.onended = function() {
                                    // 3. MUSIQUE (qui gÃ¨re sa propre rÃ©pÃ©tition ensuite)
                                    music.play();
                                };
                            }).catch(e => { music.play(); });
                        } else {
                            music.play();
                        }
                    };
                }).catch(e => {
                    music.play(); // Si erreur, on lance la musique direct
                });
            }
        }

        // --- BOUTON ACTIVER/DÃ‰SACTIVER ---
        function toggleMusic() {
            if(isPlaying) {
                // STOP TOTAL
                voice.pause();
                breath.pause();
                music.pause();
                clearTimeout(musicTimer); // On annule le timer s'il Ã©tait en train de compter les 10s
                isPlaying = false;
            } else {
                // RELANCER
                // On relance juste la musique d'ambiance
                music.play();
                isPlaying = true;
            }
            updateBtnUI();
        }

        function updateBtnUI() {
            musicBtn.innerHTML = isPlaying ? "<span>ðŸ”‡ ArrÃªter le son</span>" : "<span>ðŸŽµ Relancer le son</span>";
            musicBtn.classList.toggle('playing', isPlaying);
        }

        function openModal(id) { document.getElementById(id).style.display = "flex"; }
        function closeModal(id) { document.getElementById(id).style.display = "none"; }
        window.onclick = function(e) { if(e.target.classList.contains('modal')) e.target.style.display="none"; }
    </script>
</body>
</html>
